// gsap.to(window, { scrollTo: "#targetDiv", duration: 1, ease: "power2.out" });

document.getElementById("getStartedButton").addEventListener("click", () => {
  const target = document.getElementById("dropdownSection");
  const topPos = target.getBoundingClientRect().top + window.scrollY;

  window.scrollTo({
    top: topPos,
    left: 0,
    behavior: 'smooth',
  });
});

// SCROLL TRIGGER ON OPENING DROPDOWN

document.querySelectorAll("details").forEach((dropdown) => {
    dropdown.addEventListener("toggle", () => {
      gsap.delayedCall(0.2, () => ScrollTrigger.refresh());
    });
});

  

// HEADER STUFF ANIMATION

gsap.from(".headerStuff", {
    y: -50,
    opacity: 0,
    duration: 2,
    stagger: 0.2,
    ease: "power4.out",
})


// THUMBNAIL ANIMATION

gsap.from(".thumbnail", {
    x: -50,
    opacity: 0,
    duration: 2,
    stagger: 0.2,
    ease: "power4.out",
})

// BULLET POINT ANIMATION

gsap.utils.toArray(".diamond").forEach((diamond) => {
    gsap.from(diamond, {
      scale: 0,
      opacity: 0,
      duration: 0.6,
      scrollTrigger: {
        trigger: diamond,
        start: "top 85%",
        // markers: true,
      }
    });
});
  
gsap.fromTo(".bulletPointTitle", {
    color: "#ffffff",
}, {
    color: "#93C5FD",
    scrollTrigger: {
        trigger: ".bulletPointTitle",
        start: "top 70%",
    }
})

// YELLOW BUTTON ANIMATION

gsap.from(".yellowButtonHeader", {
    scale: 0,
    opacity: 0,
    duration: 2,
    ease: "power4.out",

    scrollTrigger: {
        trigger: ".yellowButtonHeader",
        // start: "top top",
    }
})

gsap.from(".yellowButtonThumbnail", {
    scale: 0,
    opacity: 0,
    duration: 2,
    ease: "power4.out",

    scrollTrigger: {
        trigger: ".yellowButtonThumbnail",
        // start: "top top",
    }
})

gsap.from(".yellowButtonVulnerable", {
    scale: 0.5,
    opacity: 0,
    duration: 1.5,
    ease: "power4.out",

    scrollTrigger: {
        trigger: ".yellowButtonVulnerable",
        start: "top 85%",
    }
})

gsap.from(".yellowButtonSecure", {
    scale: 0.5,
    opacity: 0,
    duration: 1,
    ease: "power4.out",

    scrollTrigger: {
        trigger: ".yellowButtonSecure",
        start: "top 85%",
    }
})

// WINDOW POPUP ANIMATION


gsap.utils.toArray(".windowPopup").forEach((windowPopup) => {
    gsap.from(windowPopup, {
      scale: 0,
      translateX: "-50%",
      translateY: "-50%",
      duration: 1.2,
      ease: "power4.out",
      scrollTrigger: {
        trigger: windowPopup,
        scrub: 1,
        // end: "bottom 50%",
        toggleActions: "play reverse play reverse",
        // start: "top 85%",
        
      }
    });
});

// PREVENTION DESCRIPTION ANIMATION

gsap.utils.toArray(".preventionDescription").forEach((preventionDescription) => {
    gsap.from(preventionDescription, {
      y: 50,
      opacity: 0,
      duration: 1.5,
      ease: "power4.out",
      scrollTrigger: {
        trigger: preventionDescription,
        start: "top 85%",
      }
    });
});

//FOOTER ANIMATION

gsap.from("footer", {

    opacity: 0,
    y:100,
    duration: 2,
    ease: "power4.out",
    scrollTrigger: {
        trigger: "footer",
        start: "top 85%",
    }

});

// POPUP1 TEXT ANIMATION

const textElement = document.querySelector(".popupText1");

const text = textElement.textContent;
textElement.textContent = "";

text.split("").forEach(char => {
  const span = document.createElement("span");
  span.textContent = char;
  textElement.appendChild(span);
});

gsap.from(
  textElement.children,
  {
    display: "none",

    stagger: 0.05, // Delay between each character
    duration: 0.5, // Duration for each character's animation
    ease: "power4.out", // Ease effect for a smooth typewriter feel

    scrollTrigger: {
      trigger: ".popupText1",
      start: "top 40%",
    }
  }
);


// POPUP2 TEXT ANIMATION

const textElement2 = document.querySelector(".popupText2");

const text2 = textElement2.textContent;
textElement2.textContent = "";

text2.split("").forEach(char => {
  const span = document.createElement("span");
  span.textContent = char;
  textElement2.appendChild(span);
});

gsap.from(
  textElement2.children,
  {
    display: "none",
    delay: 1,
    stagger: 0.05,
    duration: 1,
    ease: "power4.out",
    scrollTrigger: {
      trigger: ".popupText2",
      start: "top 40%",
    }
  }
);

